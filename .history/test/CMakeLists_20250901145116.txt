
set(SRC_DIR_SIL "${SWK_DIR}/SWK_Hello/SourceSIL")
set(SRC_DIR_NON_SIL "${SWK_DIR}/SWK_Hello/SourceNonSIL")

set(SOURCES
    test_led_blink.cpp
    ../src/led_driver_GPIO.cpp
    stubs/led_hal.cpp
)

add_compile_options(-DTEST_SUITE_ENABLED)

add_compile_definitions(UNIT_TEST)

add_executable (
  test_led_blink
  ${SOURCES}
)

set(TESTS
#    "${SWK_DIR}/SWK_Hello/Tests"
    "${CMAKE_CURRENT_SOURCE_DIR}/../../../led_blink/test"
)

target_include_directories(test_led_blink PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/../include
)

target_link_libraries(test_led_blink PUBLIC GTest::gtest_main)

include(CTest)
include(GoogleTest)

gtest_discover_tests(test_led_blink
    EXTRA_ARGS
    XML_OUTPUT_DIR "Report"
)
